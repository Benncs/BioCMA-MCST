<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BioCMAMC-ST: Simulation Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BioCMAMC-ST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('simparam.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Simulation Configuration </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Scalar initialisation</h2>
<p>There are different ways to initialize the initial concentration, but one simple method is to generate a .h5 file using the tools/init.py script.</p>
<p>A template fonction to add to this script is</p>
<div class="fragment"><div class="line"><span class="keyword">def </span>init_my_case():</div>
<div class="line">    n_compartment=500</div>
<div class="line">    n_species=4</div>
<div class="line">    liquid_phase = np.zeros((n_compartment,n_species))</div>
<div class="line">    gas_phase = np.zeros((n_compartment,n_species)) <span class="comment"># Not mandatory if only liquid </span></div>
<div class="line"> </div>
<div class="line">    gas_phase[:,0]=0 <span class="comment"># g/l</span></div>
<div class="line">    gas_phase[:,1]=0.21 <span class="comment">#g/l</span></div>
<div class="line"> </div>
<div class="line">    liquid_phase[:,0]=5 <span class="comment"># g/l</span></div>
<div class="line">    liquid_phase[:,1]=0 <span class="comment"># g/l</span></div>
<div class="line"> </div>
<div class="line">    make_initial_concentration(<span class="stringliteral">&quot;./cma_data/my-case-init.h5&quot;</span>,liquid_phase,gas_phase)</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
CLI</h2>
<p>Running the simulation directly through the command line with arguments passed to the executable is not recommended due to the complexity involved. Instead, the preferred approach is to use the runner Python script and provide a specific case descriptor file. Below is a template for the case descriptor file, which should be in XML format: </p><div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line"><span class="comment">&lt;!-- One file can contain multiple cases within this tag --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">cases</span>&gt;</div>
<div class="line">    <span class="comment">&lt;!-- &#39;name&#39; refers to the case name to be given to the runner script --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">control</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;my-case&quot;</span>&gt;</div>
<div class="line">        <span class="comment">&lt;!-- Path to the root of the CMA case (donâ€™t forget the leading &#39;/&#39;) --&gt;</span></div>
<div class="line">        <span class="comment">&lt;!-- The &#39;recursive&#39; parameter must be used for multi-flow map cases --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">cma_case_path</span> <span class="keyword">recursive</span>=<span class="stringliteral">&quot;true&quot;</span>&gt;/<span class="keyword">path</span>/<span class="keyword">to</span>/<span class="keyword">cma_case</span>/&lt;/<span class="keywordtype">cma_case_path</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Simulation time in seconds --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">final_time</span>&gt;10&lt;/<span class="keywordtype">final_time</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Total number of particles to simulate (will be automatically balanced if using MPI) --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">number_particle</span>&gt;50000&lt;/<span class="keywordtype">number_particle</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Simulation time step in seconds--&gt;</span></div>
<div class="line">        <span class="comment">&lt;!-- If &#39;n_compartment&#39; &gt; 1, leave the value as 0 to automatically determine the step size  --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">delta_time</span>&gt;0&lt;/<span class="keywordtype">delta_time</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Name of the results folder --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">results_file_name</span>&gt;<span class="keyword">debug</span>&lt;/<span class="keywordtype">results_file_name</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Number of results to be saved in the HDF5 file --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">number_exported_result</span>&gt;100&lt;/<span class="keywordtype">number_exported_result</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Model name; if not specified, the default model will be used --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">model_name</span>&gt;<span class="keyword">_</span>&lt;/<span class="keywordtype">model_name</span>&gt;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">&lt;!-- Scalar initializer file --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">initialiser_path</span>&gt;./<span class="keyword">cma_data</span>/<span class="keyword">my-case-init.h5</span>&lt;/<span class="keywordtype">initialiser_path</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">control</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">cases</span>&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="index.html">BioCMA-MCST: A Biological Simulation Tool Using Monte Carlo and Compartment Modeling Approaches</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
